[#application]
= Deploy a Multicluster Application with GitOps

`OpenShift GitOps` implements `Argo CD` as a controller so that it continuously monitors application definitions and configurations defined in a Git repository. Then, `Argo CD` compares the specified state of these configurations with their live state on the cluster.

The `ApplicationSet` leverages the cluster decision generator to interface Kubernetes custom resources that use custom resource-specific logic to decide which managed clusters to deploy to. A cluster decision resource generates a list of managed clusters, which are then rendered into the template fields of the ApplicationSet resource. This is done using duck-typing, which does not require knowledge of the full shape of the referenced Kubernetes resource.

`ApplicationSet` is a sub-project of `Argo CD` that adds multicluster support. You will go through this section to create ApplicationSets from the Red Hat Advanced Cluster Management.

== Creating an Argo CD application from ACM

An ArgoCD application can be created in ACM from the UI Console as follow:

Go throught the ACM Console and login with Openshift user:

[.lines_space]
[.console-input]
[source,bash, subs="+macros,+attributes"]
----
oc get route -n open-cluster-management
----

>> Applications

image::application/application01.png[]

>> Create Application > ApplicationSet

image::application/application02.png[]

>> General

ApplicationSet name: rhte2023-application
Argo server: openshift-gitops
Requeue time: 180

image::application/application03.png[]

>> Template

URL: https://github.com/xbryan1/rhte-2023-acm-apps.git
Revision: main
Path: rhte2023/04_deploy_applications/rhte2023-application
Remote Namespace: rhte2023-application

image::application/application04.png[]

>> Sync policy

image::application/application05.png[]

>> Placement

Cluster sets: rhte2023-gitops-clusters

image::application/application06.png[]

>> Review and Submit

image::application/application07.png[]

>> Wait until application is deployed, and check the application topoloy

image::application/application08.png[]

>> Check from the Argo CD WebConsole the application status

image::application/application09.png[]

== Creating an Argo CD application from CLI



== Drift detection and auto-healing

